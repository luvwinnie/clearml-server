fixed_users {
  guest {
    enabled: false

    default_company: "025315a9321f49f8be07f5ac48fbcf92"

    name: "Guest"
    username: "guest"
    password: "guest"

    # Allow access only to the following endpoints when using user/pass credentials
    allow_endpoints: [
      "auth.login"
    ]
  }
}

# OIDC/SSO Configuration
oidc {
  # Enable OIDC authentication
  enabled: false
  enabled: ${?CLEARML_OIDC_ENABLED}

  # Default company for auto-created OIDC users
  default_company: "025315a9321f49f8be07f5ac48fbcf92"
  default_company: ${?CLEARML_OIDC_DEFAULT_COMPANY}

  # Default role for auto-created OIDC users (user, admin, guest)
  default_role: "user"
  default_role: ${?CLEARML_OIDC_DEFAULT_ROLE}

  # OIDC Providers configuration
  providers: [
    {
      # Provider identifier (used in URLs)
      name: "authentik"
      name: ${?CLEARML_OIDC_PROVIDER_NAME}

      # Display name shown on the login button
      display_name: "Login with Authentik"
      display_name: ${?CLEARML_OIDC_PROVIDER_DISPLAY_NAME}

      # OIDC Issuer URL (used for discovery)
      issuer: ""
      issuer: ${?CLEARML_OIDC_PROVIDER_ISSUER}

      # OAuth2 Client ID
      client_id: ""
      client_id: ${?CLEARML_OIDC_PROVIDER_CLIENT_ID}

      # OAuth2 Client Secret
      client_secret: ""
      client_secret: ${?CLEARML_OIDC_PROVIDER_CLIENT_SECRET}

      # Redirect URI after authentication (auto-generated if empty)
      redirect_uri: ""
      redirect_uri: ${?CLEARML_OIDC_PROVIDER_REDIRECT_URI}

      # Scopes to request (groups scope for Authentik group-to-role mapping)
      scopes: ["openid", "profile", "email", "groups"]

      # Claim mappings
      claims {
        # Claim to use for username (unique identifier)
        username: "preferred_username"
        username: ${?CLEARML_OIDC_CLAIM_USERNAME}

        # Claim to use for email
        email: "email"
        email: ${?CLEARML_OIDC_CLAIM_EMAIL}

        # Claim to use for display name
        name: "name"
        name: ${?CLEARML_OIDC_CLAIM_NAME}
      }
    }
  ]
}